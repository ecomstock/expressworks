//expressworks 8
const fs = require('fs')
const express = require('express')
const app = express()
const port = Number(process.argv[2])
const file = process.argv[3]
let object

fs.readFile(file, (err, data) => {
	object = JSON.parse(data)
})

app.get('/books', (request, response) => {
	response.json(object)		
})

app.listen(port)

// //expressworks 7
// const express = require('express')
// let port = Number(process.argv[2])
// let app = express()
// app.get('/search', (request, response) => {
// 	let object = request.query
// 	response.send(object)
// })
// app.listen(port)

// //expressworks 6
// const express = require('express')
// let crypto = require('crypto')
// let port = Number(process.argv[2])
// let app = express()
// app.use('/message/:id', (request, response) => {
// 	let id = request.params.id
// 	let string = crypto
// 		.createHash('sha1')
// 		.update(new Date().toDateString() + id)
// 		.digest('hex')
// 	response.send(string)
// })
// app.listen(port)

// //expressworks 5
// const express = require('express')
// const stylus = require('stylus')
// let port = Number(process.argv[2])
// let directory = process.argv[3]
// let app = express()
// app.use(stylus.middleware(directory))
// app.use(express.static(directory))
// app.listen(port)

// //expressworks 4
// const express = require('express')
// let bodyparser = require('body-parser')
// let port = Number(process.argv[2])
// let app = express()
// app.use(bodyparser.urlencoded({
// 	extended: false
// }))
// app.post('/form', (request, response) => {
// 	response.end(request.body.str.split('').reverse().join(''))
// })
// app.listen(port)

// //expressworks 3
// const express = require('express')
// let port = Number(process.argv[2])
// let pugPath = process.argv[3]
// let app = express()
// app.set('view engine', 'pug')
// app.set('views', pugPath)
// app.get('/home', (request, response) => {
// 	response.render('index', {date: new Date().toDateString()})
// })
// app.listen(port)

// //expressworks 2
// const express = require('express')
// let port = Number(process.argv[2])
// let dir = process.argv[3]
// let app = express()
// app.use(express.static(dir || path.join(__dirname, 'public')))
// app.listen(port)

// //expressworks 1
// const express = require('express')
// let app = express()
// let port = process.argv[2]
// app.get('/home', (request, response) => {
// 	response.end('Hello World!')
// })
// app.listen(Number(port))